GA.custom=function(g){g.move=function(a){if(!1===a instanceof Array)a.x+=a.vx|0,a.y+=a.vy|0;else for(var b=0;b<a.length;b++){var c=a[b];c.x+=c.vx|0;c.y+=c.vy|0}};g.randomInt=function(a,b){return Math.floor(Math.random()*(b-a+1))+a};g.shoot=function(a,b,c,d,f,e){e=e();e.x=a.centerX-e.halfWidth+c*Math.cos(b);e.y=a.centerY-e.halfHeight+c*Math.sin(b);e.vx=Math.cos(b)*d;e.vy=Math.sin(b)*d;f.push(e);return e};g.contain=function(a,b,c,d){var f=b.x,e=b.y,h=b.width;b=b.height;c=c||!1;if(a.x<f){c&&(a.vx*=-1);
a.mass&&(a.vx/=a.mass);a.x=f;var g="left"}a.y<e&&(c&&(a.vy*=-1),a.mass&&(a.vy/=a.mass),a.y=e,g="top");a.x+a.width>h&&(c&&(a.vx*=-1),a.mass&&(a.vx/=a.mass),a.x=h-a.width,g="right");a.y+a.height>b&&(c&&(a.vy*=-1),a.mass&&(a.vy/=a.mass),a.y=b-a.height,g="bottom");g&&d&&d(g);return g};g.hitTestCircle=function(a,b,c){void 0===c&&(c=!1);if(c){c=b.gx+b.radius-(a.gx+a.radius);var d=b.gy+b.radius-(a.gy+a.radius)}else c=b.centerX-a.centerX,d=b.centerY-a.centerY;return Math.sqrt(c*c+d*d)<a.radius+b.radius};
g.hitTestRectangle=function(a,b,c){void 0===c&&(c=!1);if(c){var d=a.gx+a.halfWidth-(b.gx+b.halfWidth);var f=a.gy+a.halfHeight-(b.gy+b.halfHeight)}else d=a.centerX-b.centerX,f=a.centerY-b.centerY;c=a.halfWidth+b.halfWidth;a=a.halfHeight+b.halfHeight;return Math.abs(d)<c?Math.abs(f)<a?!0:!1:!1};g.hitTestCircleRectangle=function(a,b,c){void 0===c&&(c=!1);if(c){var d=a.gx;var f=a.gy;var e=b.gx;var h=b.gy}else d=a.x,f=a.y,e=b.x,h=b.y;d=f<h-b.halfHeight?d<e-1-b.halfWidth?"topLeft":d>e+1+b.halfWidth?"topRight":
"topMiddle":f>h+b.halfHeight?d<e-1-b.halfWidth?"bottomLeft":d>e+1+b.halfWidth?"bottomRight":"bottomMiddle":d<e-b.halfWidth?"leftMiddle":"rightMiddle";if("topMiddle"===d||"bottomMiddle"===d||"leftMiddle"===d||"rightMiddle"===d)a=g.hitTestRectangle(a,b,c);else{f={};switch(d){case "topLeft":f.x=e;f.y=h;break;case "topRight":f.x=e+b.width;f.y=h;break;case "bottomLeft":f.x=e;f.y=h+b.height;break;case "bottomRight":f.x=e+b.width,f.y=h+b.height}a=g.hitTestCirclePoint(a,f,c)}return a?d:a};g.hitTestCirclePoint=
function(a,b,c){void 0===c&&(c=!1);b.diameter=1;b.radius=.5;b.centerX=b.x;b.centerY=b.y;b.gx=b.x;b.gy=b.y;return g.hitTestCircle(a,b,c)};g.rectangleCollision=function(a,b,c,d){void 0===c&&(c=!1);void 0===d&&(d=!1);if(d){d=a.gx+a.halfWidth-(b.gx+b.halfWidth);var f=a.gy+a.halfHeight-(b.gy+b.halfHeight)}else d=a.centerX-b.centerX,f=a.centerY-b.centerY;var e=a.halfWidth+b.halfWidth;b=a.halfHeight+b.halfHeight;if(Math.abs(d)<e&&Math.abs(f)<b)if(e-=Math.abs(d),b-=Math.abs(f),e>=b){if(0<f){var g="top";a.y+=
b}else g="bottom",a.y-=b;c&&(a.vy*=-1)}else 0<d?(g="left",a.x+=e):(g="right",a.x-=e),c&&(a.vx*=-1);return g}};